---
phase: 03-workflow-integration
plan: 04
type: execute
wave: 1
depends_on: ["03-03"]
files_modified:
  - README.md
  - docs/getting-started.md
autonomous: true
---

<objective>
## Goal
Update README.md to reflect all Phase 3 work (shell integration, CI integration, MCP improvements, language coverage) and create a focused getting-started guide for new users.

## Purpose
The README currently has several gaps: the Supported Languages table omits Elixir/Rust/Markdown (added in Phase 1), the CLI Reference is missing `axon shell-hook`, `axon init`, and `--exit-code` (added in 03-01/03-02), and the MCP Tools section doesn't reflect the 03-03 ergonomics improvements. There is no dedicated onboarding path for new users. This plan closes all documentation gaps and delivers a polished first-run experience.

## Output
- `README.md` — corrected and expanded with Shell Integration + CI Integration sections
- `docs/getting-started.md` — new focused onboarding guide (install → index → MCP → verify → shell hook → CI)
</objective>

<context>
## Project Context
@.paul/PROJECT.md
@.paul/STATE.md

## Prior Work
@.paul/phases/03-workflow-integration/03-01-SUMMARY.md
@.paul/phases/03-workflow-integration/03-02-SUMMARY.md
@.paul/phases/03-workflow-integration/03-03-SUMMARY.md

## Source Files
@README.md
@src/axon/mcp/server.py
@templates/github-actions.yml
@templates/pre-commit-config.yaml
</context>

<acceptance_criteria>

## AC-1: Language table is accurate
```gherkin
Given the README Supported Languages table
When a reader reviews it
Then it lists Python, TypeScript, JavaScript, Elixir, Rust, and Markdown
  with correct file extensions and parser names for each
```

## AC-2: CLI reference is complete
```gherkin
Given the README CLI Reference section
When a reader looks for workflow integration commands
Then they find: axon shell-hook [--shell bash|zsh], axon init [--direnv],
  axon dead-code --exit-code, each with correct usage
```

## AC-3: Shell Integration section exists in README
```gherkin
Given a developer who wants auto-start on cd
When they read the README Shell Integration section
Then they see two integration paths (eval shell-hook OR axon init --direnv)
  with runnable commands and the one-time setup steps
```

## AC-4: CI Integration section exists in README
```gherkin
Given a developer who wants to gate CI on dead code
When they read the README CI Integration section
Then they see the axon dead-code --exit-code usage and how to copy
  the templates/ files into their project
```

## AC-5: MCP Tools table reflects 03-03 improvements
```gherkin
Given the README MCP Integration → Tools table
When a developer reads axon_query or axon_context
Then axon_query entry notes the optional language filter
  and axon_context entry notes the "file.py:symbol" disambiguation format
```

## AC-6: Getting-started guide exists
```gherkin
Given a developer new to Axon
When they read docs/getting-started.md
Then they can go from zero to a working MCP-connected index in under 5 minutes
  covering: install, axon analyze, MCP config, first tool call, optional shell hook
```

</acceptance_criteria>

<tasks>

<task type="auto">
  <name>Task 1: Fix README — language table, CLI reference, MCP tools</name>
  <files>README.md</files>
  <action>
    Make three targeted corrections to the existing README:

    1. **Supported Languages table** (near bottom of README):
       - Currently lists only Python, TypeScript, JavaScript
       - Add rows for:
         - Elixir | `.ex`, `.exs` | tree-sitter-elixir
         - Rust | `.rs` | tree-sitter-rust
         - Markdown | `.md` | tree-sitter-markdown
       - Keep existing rows unchanged

    2. **CLI Reference section** — add missing commands in the correct logical position:
       - After `axon init` (which doesn't exist yet — it was added in 03-01):
         ```
         axon shell-hook              Print shell integration function for bash or zsh
             --shell bash|zsh         Shell type (default: bash-compatible)

         axon init                    Print shell integration instructions
             --direnv                 Create/append axon auto-start block to .envrc
         ```
       - To `axon dead-code` command, add the --exit-code flag:
         ```
         axon dead-code               List all detected dead code
             --exit-code              Exit 1 if dead code found (for CI)
         ```

    3. **MCP Integration → Tools table**:
       - For `axon_query` row, update "What the agent gets" to note: "Hybrid search with optional `language` filter"
       - For `axon_context` row, update to note: "Accepts `file.py:symbol` format for disambiguation"
       - Keep all other tool rows unchanged

    Avoid: restructuring existing sections, changing examples, or touching anything outside these three locations.
  </action>
  <verify>
    - Grep for "Elixir" in README.md — should appear in Supported Languages table
    - Grep for "shell-hook" in README.md — should appear in CLI Reference
    - Grep for "--exit-code" in README.md — should appear in dead-code entry
    - Grep for "language" in README.md MCP Tools table context — should appear for axon_query
  </verify>
  <done>AC-1, AC-2, AC-5 satisfied</done>
</task>

<task type="auto">
  <name>Task 2: Add Shell Integration + CI Integration sections to README</name>
  <files>README.md</files>
  <action>
    Insert two new sections into the README. Place them after the existing "MCP Integration" section and before "How It Compares".

    **Section: Shell Integration**

    Heading: `## Shell Integration`

    Content should cover:
    - What it does: auto-starts `axon serve --watch` when you `cd` into an indexed project
    - Two setup options:

    Option A — bash/zsh shell hook (one-time in `.bashrc`/`.zshrc`):
    ```bash
    # Add to ~/.bashrc or ~/.zshrc
    eval "$(axon shell-hook)"
    # or explicitly:
    eval "$(axon shell-hook --shell zsh)"
    ```

    Option B — direnv (per-project, if direnv is installed):
    ```bash
    axon init --direnv   # creates/updates .envrc with auto-start block
    ```
    Note: `axon init` (without `--direnv`) prints setup instructions.

    How it works: a PID file (`.axon/watch.pid`) prevents duplicate watcher processes on re-entry.

    **Section: CI Integration**

    Heading: `## CI Integration`

    Content should cover:
    - Use `axon dead-code --exit-code` as a quality gate: exits 1 if dead code found, 0 if clean
    - Copy templates from `templates/` (created by Phase 3):

    GitHub Actions example:
    ```bash
    # Copy template to your project
    cp templates/github-actions.yml .github/workflows/axon.yml
    ```
    Brief mention: the template runs `axon analyze .` then `axon dead-code --exit-code` on each push.

    pre-commit example:
    ```bash
    cp templates/pre-commit-config.yaml .pre-commit-config.yaml
    ```
    Brief mention: runs `axon analyze` + dead-code check as a local pre-commit hook.

    Manual CI snippet (for projects not using templates):
    ```yaml
    - run: axon analyze .
    - run: axon dead-code --exit-code
    ```

    Avoid: modifying any content before the MCP Integration section or after the How It Compares section.
  </action>
  <verify>
    - Grep for "## Shell Integration" in README.md — section exists
    - Grep for "## CI Integration" in README.md — section exists
    - Grep for "shell-hook" in Shell Integration section — eval example present
    - Grep for "--exit-code" in CI Integration section — quality gate example present
    - Grep for "templates/" in CI Integration section — template reference present
  </verify>
  <done>AC-3, AC-4 satisfied</done>
</task>

<task type="auto">
  <name>Task 3: Create docs/getting-started.md</name>
  <files>docs/getting-started.md</files>
  <action>
    Create `docs/getting-started.md`. The directory `docs/` may not exist — create it.

    This is a focused, step-by-step onboarding guide. Target audience: developer who just discovered Axon and wants to be up and running with MCP in under 5 minutes.

    Structure and content:

    ```
    # Getting Started with Axon

    Brief (2-sentence) intro: Axon indexes your codebase into a knowledge graph and exposes it as MCP tools so AI agents get structural understanding without reading raw files.

    ## Prerequisites
    - Python 3.11+
    - uv or pip
    - An AI assistant that supports MCP (Claude Code, Cursor, etc.)

    ## Step 1: Install
    ```bash
    pip install axoniq
    # or with uv (recommended)
    uv add axoniq
    ```

    ## Step 2: Index your project
    ```bash
    cd your-project
    axon analyze .
    ```
    Expected output: show the analyze progress lines with file count, symbol count, "Done in Xs" format (pulled from README example).
    Note about --no-embeddings for faster first run.

    ## Step 3: Connect your AI assistant

    **Claude Code** — add to `.claude/settings.json` or `.mcp.json`:
    ```json
    {
      "mcpServers": {
        "axon": {
          "command": "axon",
          "args": ["serve", "--watch"]
        }
      }
    }
    ```
    Or use the helper: `axon setup --claude`

    **Cursor** — add to MCP settings:
    ```json
    {
      "axon": {
        "command": "axon",
        "args": ["serve", "--watch"]
      }
    }
    ```
    Or use: `axon setup --cursor`

    ## Step 4: Verify it's working
    In your AI assistant, ask:
    - "Use axon_list_repos to show indexed repositories"
    - "Use axon_query to find the authentication handler"

    Expected: tool returns results from the knowledge graph.

    ## Step 5 (Optional): Auto-start on project entry

    Choose one:

    **Shell hook** (bash/zsh — auto-starts watcher when you cd into any indexed project):
    ```bash
    echo 'eval "$(axon shell-hook)"' >> ~/.bashrc
    # or for zsh:
    echo 'eval "$(axon shell-hook --shell zsh)"' >> ~/.zshrc
    ```

    **direnv** (per-project):
    ```bash
    axon init --direnv
    ```

    ## What's next
    - [MCP Tool Reference](#mcp-integration) in the main README — all 7 tools with usage patterns
    - [CI Integration](#ci-integration) — dead-code quality gates and template configs
    - `axon --help` — full CLI reference
    ```

    Keep the tone practical and direct. No marketing language. Code blocks for every command. Verify the file renders cleanly as markdown (correct headings, no broken code fences).
  </action>
  <verify>
    - File exists at docs/getting-started.md
    - Grep for "axon analyze" in the file — install + index steps present
    - Grep for "axon_list_repos" — verification step present
    - Grep for "shell-hook" — optional auto-start step present
    - File has no broken markdown (opening ``` without closing ```)
  </verify>
  <done>AC-6 satisfied</done>
</task>

</tasks>

<boundaries>

## DO NOT CHANGE
- src/ — no source code changes in this plan
- tests/ — no test changes
- templates/ — files created in 03-02, do not modify
- .paul/ — PAUL metadata, not documentation targets
- README.md sections: The Problem, How Axon Solves It, TL;DR, What You Get, The Pipeline, Knowledge Graph Model, Architecture, Development, License — preserve these entirely

## SCOPE LIMITS
- Do not create additional docs/ files beyond getting-started.md
- Do not restructure or reorder README.md sections — only insert/correct within existing sections or append new sections before "How It Compares"
- Do not update PROJECT.md, ROADMAP.md language tables — those are project metadata, not end-user docs
- Do not run the test suite — this is documentation only, no code changes

</boundaries>

<verification>
Before declaring plan complete:
- [ ] README.md language table has 6 languages (Python, TypeScript, JavaScript, Elixir, Rust, Markdown)
- [ ] README.md CLI Reference includes shell-hook, init, and dead-code --exit-code
- [ ] README.md has ## Shell Integration section with eval example
- [ ] README.md has ## CI Integration section with --exit-code example
- [ ] README.md MCP Tools table notes language filter (axon_query) and file:symbol format (axon_context)
- [ ] docs/getting-started.md exists and covers all 5 steps
- [ ] No broken markdown in either file
</verification>

<success_criteria>
- All tasks completed
- All 6 acceptance criteria met
- README gaps from Phase 1–3 work are closed
- New user can follow getting-started.md to a working MCP setup without reading the full README
- No code changes introduced
</success_criteria>

<output>
After completion, create `.paul/phases/03-workflow-integration/03-04-SUMMARY.md`
</output>
