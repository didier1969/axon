# PAUL Handoff

**Date:** 2026-02-28
**Status:** paused — milestone v0.4 complete, awaiting v0.5 definition

---

## READ THIS FIRST

You have no prior context. This document tells you everything.

**Project:** axon — Codebase Intelligence Graph
**Core value:** Developers and AI agents can instantly understand any codebase — files auto-indexed, agents query the DB to reduce token usage and improve quality.

---

## Current State

**Version:** 0.4.0
**Milestone:** v0.4 Consolidation & Scale — ✅ COMPLETE
**Phase:** None active
**Plan:** None — milestone archived

**Loop Position:**
```
PLAN ──▶ APPLY ──▶ UNIFY
  ○        ○        ○     [Milestone complete — ready for next]
```

---

## What Was Done This Session

- **UNIFY 01-04** complete — multi-repo MCP routing, analytics, axon stats reconciled
- **Phase transition** — ROADMAP.md, STATE.md, PROJECT.md all updated
- **Milestone v0.4 archived** — MILESTONES.md created, .paul/milestones/v0.4.0-ROADMAP.md created
- **Git tag v0.4.0** created
- **Commits made:**
  - `3ffa3a2` feat(01-03): language parser expansion — 12 languages, 20 extensions
  - `e7a7c29` feat(01-04): multi-repo MCP routing, analytics, axon stats
  - `6364c9f` docs(01-consolidation-and-scale): unify 01-04, phase transition
  - `21cbba2` chore(milestone): complete v0.4 Consolidation & Scale
- **axon v0.4.0 installed** — upgraded from v0.2.3 via `uv tool install`
- **24 projects re-indexed** — all up to date with new parsers

---

## What's In Progress

- Nothing. Repo is clean, working tree has no uncommitted changes.

---

## Bugs Logged (for v0.5 scope)

### Bug 1 — `axon stats` polluted by test repos
- **Symptom:** `~/.axon/events.jsonl` contains entries like `test_run_pipeline_basic0`, `test_idempotent0` etc.
- **Root cause:** `log_event("index", repo=repo_path.name)` called in pipeline tests; `monkeypatch(Path.home())` in `test_analytics.py` but NOT in `test_pipeline.py` tests
- **Fix:** Add `monkeypatch` of `Path.home()` to all pipeline tests that trigger `log_event`, OR filter test-named repos in `axon stats`

### Bug 2 — Elixir parser skips `use` declarations
- **Symptom:** `Unknown heritage kind 'uses' for ModuleName` warnings on every Elixir project
- **Root cause:** Elixir `use SomeModule` (macros) is a fundamental pattern not handled by the parser
- **Projects affected:** multiDB, trader-elixir-v2, flow_analyzer, and others
- **Fix:** Add `use` → `heritage` relationship in Elixir parser

---

## What's Next

**Immediate:**
```
/paul:discuss-milestone
```
Define scope for v0.5. Candidate themes based on bugs + deferred issues:
- Fix test pollution in events.jsonl + Elixir `use` parser
- Deferred: flaky async embeddings test, slow watcher tests, sequential community detection
- New: LLM feedback loop (post-query satisfaction scoring via events.jsonl)

**MCP Note for next session:**
- Restart Claude Code to load axon v0.4.0 MCP server (current session still uses v0.2.3 server)
- After restart, `repo="project-name"` param works on axon_query/context/impact

---

## Key Files

| File | Purpose |
|------|---------|
| `.paul/STATE.md` | Live project state |
| `.paul/ROADMAP.md` | Milestone overview (reorganized, v0.4 collapsed) |
| `.paul/MILESTONES.md` | Completed milestone log |
| `.paul/milestones/v0.4.0-ROADMAP.md` | v0.4 archive |

---

## Resume Instructions

1. Run `/paul:resume` — it will read STATE.md and route to discuss-milestone
2. Or directly: `/paul:discuss-milestone` to define v0.5

---

*Handoff created: 2026-02-28*
